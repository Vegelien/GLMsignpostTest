% Generated by hand to match roxygen2 output
\name{estimation_simulation}
\alias{estimation_simulation}
\alias{run_and_store_estimation_simulations}
\title{Run estimation simulations and persist their outputs}
\description{
Generate Monte Carlo samples for theta-hat and loss summaries and, optionally,
persist them to the estimation simulation database.
}
\usage{
estimation_simulation(
  n,
  p,
  lambda,
  model,
  misspecified = FALSE,
  n_beta = NULL,
  lambda_beta = 2,
  lambda_est = 0.5,
  B_power = 10,
  gammas = seq(0, 1, by = 0.1),
  scaled = TRUE
)

run_and_store_estimation_simulations(
  db_path = "estimation_simulations.db",
  n_grid = c(10, 50, 150),
  p = 100,
  lambda = Inf,
  model = "logistic",
  specifications = c("well_specified", "misspecified"),
  n_beta_values = list(NULL, 300),
  lambda_beta = 2,
  lambda_est = 0.5,
  B_power = 10,
  gammas = seq(0, 1, by = 0.1)
)
}
\arguments{
  \item{n}{Integer sample size.}
  \item{p}{Integer number of predictors.}
  \item{lambda}{Numeric ridge penalty for theta estimation.}
  \item{model}{Character string selecting the GLM family.}
  \item{misspecified}{Logical flag indicating whether the working model is
  misspecified.}
  \item{n_beta}{Optional integer sample size used to estimate working
  coefficients.}
  \item{lambda_beta}{Numeric ridge penalty used when estimating working
  coefficients.}
  \item{lambda_est}{Numeric ridge penalty used during the loss calculation.}
  \item{B_power}{Integer number of Monte Carlo replicates.}
  \item{gammas}{Numeric vector of gamma values.}
  \item{scaled}{Logical, forwarded to helper routines to indicate whether the
  ridge penalties are scaled.}
  \item{db_path}{Path to the SQLite database that stores estimation simulations.}
  \item{n_grid}{Integer vector of sample sizes.}
  \item{specifications}{Character vector describing whether runs are well
  specified or misspecified.}
  \item{n_beta_values}{List containing \code{NULL} (oracle) and/or integers for
  the working coefficient sample sizes.}
}
\value{
\code{estimation_simulation()} returns a list containing the matrices
\code{theta_hats}, \code{target_loss}, and \code{null_loss}. The
\code{run_and_store_estimation_simulations()} helper invisibly returns
\code{NULL} and is called for its side effects.
}
\examples{
\dontrun{
sim <- estimation_simulation(
  n = 10, p = 20, lambda = Inf, model = "logistic",
  n_beta = NULL, lambda_beta = 2, lambda_est = 0.5,
  B_power = 2, gammas = c(0, 0.5)
)
str(sim)

 tmp_db <- tempfile(fileext = ".sqlite")
 initialize_estimation_database(tmp_db)
 run_and_store_estimation_simulations(
   db_path = tmp_db, B_power = 2, n_grid = c(10, 20), gammas = c(0, 0.5)
 )
}
}
